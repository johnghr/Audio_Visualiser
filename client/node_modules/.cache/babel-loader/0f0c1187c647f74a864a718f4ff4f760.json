{"ast":null,"code":"var _jsxFileName = \"/Users/john/codeclan_work/final_project/full_stack_audio_processing_with_functions/audio_processing/client/src/components/Visualisers/FrequencyVisualiser.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from 'react'; //let testWaveFormRef = useRef(Array.from({length: 1024}, () => Math.floor(Math.random() * 255)));\n//  const testWaveForm = testWaveFormRef.current;\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FrequencyVisualiser = ({\n  audioData,\n  analyser,\n  background\n}) => {\n  _s();\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    let canvas = canvasRef.current;\n    let height = canvas.height;\n    let width = canvas.width;\n    let context = canvas.getContext('2d');\n    let randomColour = \"#\" + ((1 << 24) * Math.random() | 0).toString(16); // a quarter of the fft size default\n\n    analyser.fftSize = 256;\n    console.log(analyser); //bufferLength equals half the fftSize i.e. 128\n\n    let bufferLength = analyser.frequencyBinCount;\n    console.log(\"buffer length\", bufferLength); // let dataArray = new Uint8Array(bufferLength);\n\n    context.clearRect(0, 0, width, height);\n\n    const render = () => {\n      if (background === \"Clear\") {}\n\n      context.fillStyle = '#00aeb0';\n      context.fillRect(0, 0, width, height);\n      let barWidth = width / bufferLength * 2.5;\n      let barHeight;\n      let x = 0;\n\n      for (var i = 0; i < bufferLength; i++) {\n        // the height of a bar equals the current audio sample value halved\n        barHeight = audioData[i] / 0.3;\n        context.fillStyle = randomColour;\n        context.fillRect(x, height - barHeight / 2, barWidth, barHeight);\n        x += barWidth + 1;\n      }\n    };\n\n    render();\n  }, [audioData]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    className: \"frequency-canvas\",\n    width: \"550\",\n    height: \"550\",\n    ref: canvasRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FrequencyVisualiser, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n\n_c = FrequencyVisualiser;\nexport default FrequencyVisualiser;\n\nvar _c;\n\n$RefreshReg$(_c, \"FrequencyVisualiser\");","map":{"version":3,"sources":["/Users/john/codeclan_work/final_project/full_stack_audio_processing_with_functions/audio_processing/client/src/components/Visualisers/FrequencyVisualiser.js"],"names":["React","useRef","useEffect","FrequencyVisualiser","audioData","analyser","background","canvasRef","canvas","current","height","width","context","getContext","randomColour","Math","random","toString","fftSize","console","log","bufferLength","frequencyBinCount","clearRect","render","fillStyle","fillRect","barWidth","barHeight","x","i"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC,C,CAEA;AACA;;;;AAEA,MAAMC,mBAAmB,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,QAAb;AAAuBC,EAAAA;AAAvB,CAAD,KAAyC;AAAA;;AAEjE,QAAMC,SAAS,GAAGN,MAAM,EAAxB;AAEAC,EAAAA,SAAS,CAAC,MAAM;AAEZ,QAAIM,MAAM,GAAGD,SAAS,CAACE,OAAvB;AACA,QAAIC,MAAM,GAAGF,MAAM,CAACE,MAApB;AACA,QAAIC,KAAK,GAAGH,MAAM,CAACG,KAAnB;AACA,QAAIC,OAAO,GAAGJ,MAAM,CAACK,UAAP,CAAkB,IAAlB,CAAd;AACA,QAAIC,YAAY,GAAG,MAAM,CAAC,CAAC,KAAK,EAAN,IAAYC,IAAI,CAACC,MAAL,EAAZ,GAA4B,CAA7B,EAAgCC,QAAhC,CAAyC,EAAzC,CAAzB,CANY,CAQZ;;AACAZ,IAAAA,QAAQ,CAACa,OAAT,GAAmB,GAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYf,QAAZ,EAVY,CAWZ;;AACA,QAAIgB,YAAY,GAAGhB,QAAQ,CAACiB,iBAA5B;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BC,YAA7B,EAbY,CAcZ;;AAEAT,IAAAA,OAAO,CAACW,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBZ,KAAxB,EAA+BD,MAA/B;;AAEA,UAAMc,MAAM,GAAG,MAAM;AACjB,UAAGlB,UAAU,KAAK,OAAlB,EAA0B,CAErB;;AACLM,MAAAA,OAAO,CAACa,SAAR,GAAoB,SAApB;AACAb,MAAAA,OAAO,CAACc,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuBf,KAAvB,EAA8BD,MAA9B;AAEA,UAAIiB,QAAQ,GAAIhB,KAAK,GAAGU,YAAT,GAAyB,GAAxC;AACA,UAAIO,SAAJ;AACA,UAAIC,CAAC,GAAG,CAAR;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,YAApB,EAAkCS,CAAC,EAAnC,EAAuC;AACnC;AACAF,QAAAA,SAAS,GAAGxB,SAAS,CAAC0B,CAAD,CAAT,GAAe,GAA3B;AAEAlB,QAAAA,OAAO,CAACa,SAAR,GAAoBX,YAApB;AACAF,QAAAA,OAAO,CAACc,QAAR,CAAiBG,CAAjB,EAAoBnB,MAAM,GAAGkB,SAAS,GAAG,CAAzC,EAA4CD,QAA5C,EAAsDC,SAAtD;AAEAC,QAAAA,CAAC,IAAIF,QAAQ,GAAG,CAAhB;AACH;AACJ,KApBD;;AAsBAH,IAAAA,MAAM;AAET,GA1CQ,EA0CN,CAACpB,SAAD,CA1CM,CAAT;AA4CA,sBACI;AACI,IAAA,SAAS,EAAC,kBADd;AAEI,IAAA,KAAK,EAAC,KAFV;AAGI,IAAA,MAAM,EAAC,KAHX;AAII,IAAA,GAAG,EAAEG;AAJT;AAAA;AAAA;AAAA;AAAA,UADJ;AASH,CAzDD;;GAAMJ,mB;;KAAAA,mB;AA2DN,eAAeA,mBAAf","sourcesContent":["import React, { useRef, useEffect } from 'react';\n\n//let testWaveFormRef = useRef(Array.from({length: 1024}, () => Math.floor(Math.random() * 255)));\n//  const testWaveForm = testWaveFormRef.current;\n\nconst FrequencyVisualiser = ({ audioData, analyser, background }) => {\n\n    const canvasRef = useRef();\n\n    useEffect(() => {\n\n        let canvas = canvasRef.current;\n        let height = canvas.height;\n        let width = canvas.width;\n        let context = canvas.getContext('2d');\n        let randomColour = \"#\" + ((1 << 24) * Math.random() | 0).toString(16)\n\n        // a quarter of the fft size default\n        analyser.fftSize = 256;\n        console.log(analyser)\n        //bufferLength equals half the fftSize i.e. 128\n        let bufferLength = analyser.frequencyBinCount;\n        console.log(\"buffer length\", bufferLength);\n        // let dataArray = new Uint8Array(bufferLength);\n\n        context.clearRect(0, 0, width, height);\n\n        const render = () => {\n            if(background === \"Clear\"){\n                    \n                }\n            context.fillStyle = '#00aeb0';\n            context.fillRect(0, 0, width, height);\n\n            let barWidth = (width / bufferLength) * 2.5;\n            let barHeight;\n            let x = 0;\n\n            for (var i = 0; i < bufferLength; i++) {\n                // the height of a bar equals the current audio sample value halved\n                barHeight = audioData[i] / 0.3;\n                \n                context.fillStyle = randomColour;\n                context.fillRect(x, height - barHeight / 2, barWidth, barHeight)\n\n                x += barWidth + 1;\n            }\n        };\n\n        render()\n\n    }, [audioData]);\n\n    return (\n        <canvas\n            className=\"frequency-canvas\"\n            width=\"550\"\n            height=\"550\"\n            ref={canvasRef}\n        />\n    )\n\n}\n\nexport default FrequencyVisualiser;"]},"metadata":{},"sourceType":"module"}